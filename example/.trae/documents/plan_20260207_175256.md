I will implement `SpeakerCodec` and `MicrophoneCodec` classes in `wrapper/audio.hpp` and `wrapper/audio.cpp` by extracting and adapting the relevant functionality from the existing `AudioCodec` class. These classes will provide specialized interfaces for speaker-only and microphone-only audio devices.

**1. Analyze Existing `AudioCodec`**

`AudioCodec` currently handles both speaker and microphone. It manages:
*   I2S Bus reference.
*   I2S Data and GPIO interfaces (shared).
*   Speaker: Control interface, Codec interface, Device handle, Volume/Mute controls, Write.
*   Microphone: Control interface, Codec interface, Device handle, Gain/Mute controls, Read.

**2. Design `SpeakerCodec`**

*   **Responsibility**: Manage a speaker output device via I2S and I2C control.
*   **Members**:
    *   `Logger&`
    *   `I2sBus*`
    *   `audio_codec_data_if_t*` (I2S data interface)
    *   `audio_codec_gpio_if_t*` (GPIO interface)
    *   `audio_codec_ctrl_if_t*` (Control interface)
    *   `audio_codec_if_t*` (Codec interface)
    *   `esp_codec_dev_handle_t` (Device handle)
    *   `bool enabled_`
*   **Methods**:
    *   `Init(I2sBus&)`
    *   `AddSpeaker(I2cBus&, addr, codec_new_func)` -> Renamed to `InitDevice(...)` or similar? Or keep `AddSpeaker` logic but maybe `InitCodec`? The user said "implement SpeakerCodec... referring to AudioCodec". `AudioCodec` has `AddSpeaker`.
    *   `SetVolume`, `GetVolume`
    *   `SetMute`, `IsMuted`
    *   `Enable`, `Disable`
    *   `Write` (and vector overloads)

**3. Design `MicrophoneCodec`**

*   **Responsibility**: Manage a microphone input device via I2S and I2C control.
*   **Members**: Similar to SpeakerCodec but for input.
*   **Methods**:
    *   `Init(I2sBus&)`
    *   `AddMicrophone(...)` -> `InitCodec`?
    *   `SetGain`, `GetGain`
    *   `SetMute`, `IsMuted`
    *   `Enable`, `Disable`
    *   `Read` (and vector overloads)

**4. Implementation Details**

*   I will add these two classes to `wrapper/audio.hpp` and implement them in `wrapper/audio.cpp`.
*   They will duplicate some logic from `AudioCodec` (creating data/gpio interfaces), but that's expected if they are standalone.
*   Note: If both are used on the same I2S bus, creating multiple `audio_codec_new_i2s_data` might be an issue if they conflict, but usually the I2S driver handles handles. However, `AudioCodec` shares them. If `SpeakerCodec` and `MicrophoneCodec` are used separately, they will create their own interfaces.

**Refined Plan:**

1.  **Modify `wrapper/audio.hpp`**:
    *   Add `class SpeakerCodec`.
    *   Add `class MicrophoneCodec` (User said `MicphoneCodec` but `MicrophoneCodec` is better English, though I should stick to user's naming if they insisted, but "Micphone" is a typo. I'll use `MicrophoneCodec` or `MicCodec`. The user input said "MicphoneCodec", I will correct it to `MicrophoneCodec` or just follow `AudioCodec`'s naming convention).
    *   User input: "implement SpeakerCodec and MicphoneCodec". I will use `MicphoneCodec` to match request exactly or `MicrophoneCodec` and mention correction. I'll use `MicrophoneCodec` as it's the standard term in the file (`AddMicrophone`).
    *   Wait, the user's snippet in `audio.hpp` (from previous turn, possibly) showed `class MicphoneCodec` in the `Read` output? No, the `Read` output showed `AudioCodec` and `AudioNone`. The user *wants* me to add them.
    *   I will add the class declarations.

2.  **Modify `wrapper/audio.cpp`**:
    *   Implement the methods for both classes, copying logic from `AudioCodec`.

Let's do this.